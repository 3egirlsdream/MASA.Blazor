function s(s,e,t,i){return new(t||(t=Promise))((function(l,n){function o(s){try{h(i.next(s))}catch(s){n(s)}}function a(s){try{h(i.throw(s))}catch(s){n(s)}}function h(s){var e;s.done?l(s.value):(e=s.value,e instanceof t?e:new t((function(s){s(e)}))).then(o,a)}h((i=i.apply(s,e||[])).next())}))}class e{constructor(s,e,t,i){this.dotnetHelper=s,this.name=e,this.leaveAbsolute=i,this.enterClass=`${this.name}-enter`,this.enterActiveClass=`${this.name}-enter-active`,this.enterToClass=`${this.name}-enter-to`,this.leaveClass=`${this.name}-leave`,this.leaveActiveClass=`${this.name}-leave-active`,this.leaveToClass=`${this.name}-leave-to`,this.el="string"==typeof t?document.querySelector(t):t}onEnter(s){s&&(this.el=s),console.log("this.el",this.el),this.addTransitionClass(this.el,this.enterClass),this.addTransitionClass(this.el,this.enterActiveClass),console.log("add enter from class",this.el.className);const e=()=>{this.removeTransitionClass(this.el,this.enterToClass),this.removeTransitionClass(this.el,this.enterActiveClass),console.log("remove enter to class",this.el.className)};requestAnimationFrame((()=>{requestAnimationFrame((()=>{this.removeTransitionClass(this.el,this.enterClass),this.addTransitionClass(this.el,this.enterToClass),console.log("add enter to class",this.el.className),this.el.addEventListener("transitionend",e)}))}))}delay(s,e){return new Promise((t=>{setTimeout((()=>t(s)),e)}))}onEnterTo(s){s&&(this.el=s);const e=()=>{this.removeTransitionClass(this.el,this.enterToClass),this.removeTransitionClass(this.el,this.enterActiveClass),console.log("remove enter to class",this.el.className)};requestAnimationFrame((()=>{requestAnimationFrame((()=>{console.log("this.el",this.el,this.el.className,this.el.classList),this.removeTransitionClass(this.el,this.enterClass),this.addTransitionClass(this.el,this.enterToClass),console.log("add enter to class",this.el.className),this.el.addEventListener("transitionend",e)}))}))}onLeave(){if(console.log("this.leaveAbsolute",this.leaveAbsolute),this.leaveAbsolute){const{offsetTop:s,offsetLeft:e,offsetWidth:t,offsetHeight:i}=this.el;this.el._transitionInitialStyles={position:this.el.style.position,top:this.el.style.top,left:this.el.style.left,width:this.el.style.width,height:this.el.style.height},console.log("this.el.offsetLeft",this.el.offsetLeft),this.el.style.position="absolute",this.el.style.top=s+"px",this.el.style.left=e+"px",this.el.style.width=t+"px",this.el.style.height=i+"px",console.log("this.el.style.left",this.el.style.left)}this.addTransitionClass(this.el,this.leaveClass),this.addTransitionClass(this.el,this.leaveActiveClass),console.log("this.el.className",this.el.className);const e=()=>s(this,void 0,void 0,(function*(){if(console.log("OnTransitionEnd....."),yield this.dotnetHelper.invokeMethodAsync("OnTransitionEnd"),console.log("before removeTransitionClass ->",this.el.className),this.removeTransitionClass(this.el,this.leaveToClass),this.removeTransitionClass(this.el,this.leaveActiveClass),console.log("removeTransitionClass this.el.className ->",this.el.className),this.el&&this.el._transitionInitialStyles){const{position:s,top:e,left:t,width:i,height:l}=this.el._transitionInitialStyles;delete this.el._transitionInitialStyles,this.el.style.position=s||"",this.el.style.top=e||"",this.el.style.left=t||"",this.el.style.width=i||"",this.el.style.height=l||""}}));requestAnimationFrame((()=>{requestAnimationFrame((()=>{console.log("requestAnimationFrame..."),this.removeTransitionClass(this.el,this.leaveClass),this.addTransitionClass(this.el,this.leaveToClass),this.el.addEventListener("transitionend",e)}))}))}addTransitionClass(s,e){e.split(/\s+/).forEach((e=>e&&s.classList.add(e)))}removeTransitionClass(s,e){e.split(/\s+/).forEach((e=>e&&s.classList.remove(e)))}}function t(s,t,i,l){return new e(s,t,i,l)}export{t as init};
//# sourceMappingURL=transition.js.map
